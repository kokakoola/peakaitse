<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>peakaitse</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->

<!--         <link rel="stylesheet" href="assets/css/app.min_1.css">
        <link rel="stylesheet" href="assets/css/app.min_2.css"> -->
        <link rel="stylesheet" href="assets/css/app.css">
        <link rel="stylesheet" href="assets/css/custom.css">

        <script src="assets/js/vendor/modernizr.js"></script>

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
            <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <!--[if lt IE 10]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <nav class="navbar">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="./">- PARAS PEAKAITSE -</a>
                </div>
                <div id="navbar" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <!-- <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Kullerkupu tee 8-421b, Kolga-Aabla vald, Pärnumaa <span class="caret"></span></a>
                          <ul class="dropdown-menu">
                            <li><a href="#">Action</a></li>
                            <li><a href="#">Another action</a></li>
                            <li><a href="#">Something else here</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#">Separated link</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#">One more separated link</a></li>
                          </ul>
                        </li> -->

                        <li class="dropdown">
                          <a href="#" class="dropdown-toggle header-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span></span> <span class="caret"></span></a>
                          <ul class="dropdown-menu">
                            <li><a href="index.html">Välju</a></li>
                          </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <section class="jumbotron intro">
            <div class="container">
                <div class="row">
                    <!-- <div class="actionbar">
                        <div class="col-xs-6">
                            <div class="form-group">
                                <select class="form-control js-addressList"></select>
                            </div>
                        </div>
                        <div class="col-sm-6 well">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-md-6 control-label" for="textinput">Kasutatav peakaitse A</label>
                                    <div class="col-md-6">
                                        <select class="form-control js-fuseList"></select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-6 control-label" for="textinput">Kasutatav peakaitse faas</label>
                                    <div class="col-md-6">
                                        <div class="radio">
                                            <label for="radios-0">
                                                <input type="radio" name="amp" id="radios-0" value="A1" checked="checked">
                                                1 faasiline peakaitse
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label for="radios-1">
                                                <input type="radio" name="amp" id="radios-1" value="A3">
                                                3 faasiline peakaitse
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-md-6 col-sm-offset-6">
                                        <button class="btn btn-primary js-showChart">Vaata graafikut</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div> -->
                        <div class="col-xs-12 col-sm-12">
                            <!-- Single button -->
                            <div class="btn-group btn-group-justified">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-lg btn-outline dropdown-toggle" id="js-firstAddress" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                      Lepistiku 45-452 Tallinn 10234 EIC 34526463  <i class="glyphicon glyphicon-download"></i>  
                                    </button>
                                    <ul class="dropdown-menu js-addressList">
                                      <!-- <li><a href="#">Teine aadress</a></li>
                                      <li><a href="#">Kolmas aadress</a></li> -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                        <p>Allolevalt graafikult näete elektritarbimise koguseid ja tarbimisele vastavaid voolutugevusi peakaitsmes. Kõige madalamat tarbimiskogust ja voolu ning tiputarbimise kilovatt-tunde ja voolu amprites. Kui Teie kasutatavad voolutugevused jäävad alla peakaitsme nimivoolu, soovitame uurida elektriala spetsialistidelt peakaitsme vähendamist graafikul näidatud soovituslikule tasemele. </p>
                    </div>
                </div>
            </div>
        </section>

        <section class="jumbotron charted animated bounceInRight first">
            <div class="container">
                <div class="row actionbar animated bounceInRight second">
                    <div class="col-xs-12 col-sm-3">
                        <button class="btn btn-block btn-outline-inverse btn-lg js-changeUnit active" data-unit="kWh"><i class="glyphicon glyphicon-ok-sign"></i>Tarbimine kWh</button>
                    </div>
                    <div class="col-xs-12 col-sm-3">
                        <button class="btn btn-block btn-outline-inverse btn-lg js-changeUnit" data-unit="A1"> <i class="glyphicon glyphicon-one-fine-empty-dot"></i>1-faasiline peakaitse</button>
                    </div>
                    <div class="col-xs-12 col-sm-3">
                    <button class="btn btn-block btn-outline-inverse btn-lg js-changeUnit" data-unit="A3"><i class="glyphicon glyphicon-one-fine-empty-dot"></i>3-faasiline peakaitse</button>
                    </div>
                    <div class="col-xs-12 col-sm-3">
                        <!-- Single button -->
                        <div class="btn-group btn-group-justified">
                            <div class="btn-group">
                              <button type="button" class="btn btn-lg btn-outline-inverse dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Sinu peakaitsme suurus  <i class="glyphicon glyphicon-download"></i> 
                              </button>
                              <ul class="dropdown-menu js-fuseList">
                              </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row actionbar">
                    <div class="col-xs-12">
                        <div id="chart"></div>
                    </div>
                </div>
                <div class="row actionbar animated bounceInRight second">
                    <div class="col-xs-12 text-center">
                        <span class="text-inverse">Vaata ajavahemikku:</span>
                            <button class="btn btn-outline-inverse js-unZoom"><i class="glyphicon glyphicon-ok-sign"></i>Viimane aasta</button>
                            <button class="btn btn-outline-inverse js-month"><i class="glyphicon glyphicon-one-fine-empty-dot"></i>Viimane kuu</button>
                            <button class="btn btn-outline-inverse js-week"><i class="glyphicon glyphicon-one-fine-empty-dot"></i>Viimane nädal</button>
                            <button class="btn btn-outline-inverse js-day"><i class="glyphicon glyphicon-one-fine-empty-dot"></i>Viimane päev</button>
                    </div>
                </div>
            </div>
        </section>

        <footer>
            <div class="container">
                <div class="row partner animated bounceInRight first">
                    <div class="col-sm-4">
                        <a href="./" class="estfeed"></a>
                    </div>
                    <div class="col-sm-4">
                        <a href="./" class="elektrilevi"></a>
                    </div>
                    <div class="col-sm-4">
                        <a href="./" class="nwg"></a>
                    </div>
                </div>
            </div>
        </footer>


        <div id="loader" class="page-loader">
            <i class="fa fa-spinner fa-spin"></i>
        </div>

    <script>
    function midAuth() {
      xhr=new XMLHttpRequest();
      xhr.open("POST","midAuth",true);
      xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
      xhr.onreadystatechange=function() {
        if (xhr.readyState==4 && xhr.status==200) {
          data = JSON.parse(xhr.responseText);
          document.getElementById('challengeId').innerHTML = data.challengeId;
          midPoll();
        }
      }
      s = "phoneNo="+document.getElementById('phoneNumber').value;
      xhr.send(s);
    }

    function midPoll() {
      xhr=new XMLHttpRequest();
      xhr.open("POST","midStatus",true);
      xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
      xhr.onreadystatechange=function() {
        if (xhr.readyState==4 && xhr.status==200) {
          data = JSON.parse(xhr.responseText);
          switch(data.status) {
            case 'OUTSTANDING_TRANSACTION':
              setTimeout(function() {midPoll();}, 2000);
              break;
            case 'USER_AUTHENTICATED':
              document.location.href=data.dashboardUrl;
              break;
            default:
					// data.status võimalikud väärtused:
					// NOT_VALID – toiming on lõppenud, kuid kasutaja poolt tekitatud signatuur ei ole kehtiv
					// EXPIRED_TRANSACTION – tegevus on aegunud
					// USER_CANCEL – kasutaja katkestas
					// MID_NOT_READY - Mobiil-ID funktsionaalsus ei ole veel kasutatav, proovida mõne aja pärast uuesti
					// PHONE_ABSENT – telefon ei ole levis
					// SENDING_ERROR – Muu sõnumi saatmise viga (telefon ei suuda sõnumit vastu võtta, sõnumikeskus häiritud)
					// SIM_ERROR – SIM rakenduse viga
					// INTERNAL_ERROR – teenuse tehniline viga
					// AUTH_NOT_STARTED - autentimist pole alustatud: saab juhtuda siis, kui keegi otse URL-ga sellele PIN-lehele
					// SEE_SERVER_LOG - vea põhjust vaata serveri logifailist
              el = document.getElementById('errorMessage');
              el.innerHTML=data.status;
              if (el.className.endsWith('hide')) {
                cl = el.className.substring(0, el.className.length - 4);
                el.className = cl;
              }
              break;
          }
        }
      }
      s = "phoneNo="+document.getElementById('phoneNumber').value;
      xhr.send(s);
    }
    </script>

        <script src="assets/js/vendor/jquery.min.js"></script>
        <script src="assets/js/app.js"></script>
        <script src="assets/js/custom.js"></script>
    </body>
</html>
